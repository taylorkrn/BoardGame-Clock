{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\taylo\\\\OneDrive\\\\Documents\\\\WebDevelopment\\\\Learn_React\\\\boardgame_clock\\\\src\\\\PlayerSetup.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useRef, useEffect } from 'react';\nimport './App.css';\nimport PlayerList from './PlayerList.js';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction PlayerSetup() {\n  _s();\n\n  const [players, setPlayers] = useState([]);\n  const [counter, setCounter] = useState(0);\n  const colors = ['red', 'green', 'yellow', 'blue', 'white', 'black']; // Ref so that UseEffect is not run when the page is first loaded\n\n  const firstLoad = useRef(true);\n  useEffect(() => {\n    if (firstLoad.current) {\n      firstLoad.current = false;\n      return;\n    }\n\n    const myCounter = counter;\n\n    if (!players[counter].Active) {\n      return;\n    }\n\n    const now = Date.now();\n    const then = now + players[myCounter].TimeAllowed * 1000;\n    const timer = setTimeout(() => {\n      //check if we should stop the timer\n      // if(!players[myCounter].Active || myCounter !== counter){\n      //     console.log(\"Out!\");\n      //     clearTimeout(timer);\n      //     return;\n      // };\n      if (!players[counter].Finished) {\n        const secondsLeft = Math.round((then - Date.now()) / 1000);\n\n        if (secondsLeft <= 0) {\n          setPlayers(previousPlayers => previousPlayers.map(player => player.Id === myCounter ? { ...player,\n            TimeAllowed: secondsLeft,\n            Finished: true\n          } : { ...player\n          }));\n          console.log(players[counter]);\n        } else {\n          setPlayers(previousPlayers => previousPlayers.map(player => player.Id === myCounter ? { ...player,\n            TimeAllowed: secondsLeft\n          } : { ...player\n          }));\n        }\n      } else {\n        const overTime = Math.round((Date.now() - then) / 1000);\n        setPlayers(previousPlayers => previousPlayers.map(player => player.Id === myCounter ? { ...player,\n          TimeAllowed: overTime\n        } : { ...player\n        }));\n        ;\n      }\n    }, 1000);\n    return () => clearTimeout(timer);\n  }, [players, counter]);\n  let numPlayers = 0;\n  let timeAllowed = 0; // Ref to save and use the input for amount of time\n\n  const noPlayersRef = useRef(); //Set number of players based on Input\n\n  function handlePlayers(e) {\n    e.preventDefault();\n    numPlayers = noPlayersRef.current.value;\n\n    if (!(numPlayers > 1 && numPlayers <= 6)) {\n      alert('Invalid amount of Players, must be between 2 and 6');\n      return;\n    }\n\n    ;\n    const myArray = [];\n\n    for (let i = 0; i < numPlayers; i++) {\n      myArray.push({\n        Id: i,\n        Name: `Player ${i + 1}`,\n        Position: i,\n        TimeAllowed: timeAllowed,\n        Active: false,\n        Color: colors[i],\n        Finished: false\n      });\n    }\n\n    setPlayers(myArray);\n    document.querySelector('#StartForm').style.display = 'none';\n    document.querySelector('#TimeForm').style.display = 'block';\n  } // Ref to save and use the input for amount of time\n\n\n  const timeAllowedRef = useRef(); //Set amount of time allowed based on input\n\n  function handleTime(e) {\n    e.preventDefault();\n    timeAllowed = timeAllowedRef.current.value;\n\n    if (!(timeAllowed => 1 && timeAllowed <= 300)) {\n      alert('Invalid amount of Time, must be between 1 and 300');\n      return;\n    }\n\n    ;\n    setPlayers(oldPlayers => oldPlayers.map(player => {\n      return { ...player,\n        TimeAllowed: timeAllowed * 60\n      };\n    }));\n    document.querySelector('#TimeForm').style.display = 'none';\n    document.querySelector('#StartGame').style.display = 'block';\n    const names = document.querySelectorAll('.name');\n    names.forEach(name => name.disabled = false);\n  } //Function to start the game\n\n\n  function handleStartGame(e) {\n    setPlayers(oldPlayers => oldPlayers.map(player => player.Id === 0 ? { ...player,\n      Active: true\n    } : { ...player\n    }));\n    document.querySelector('#StartGame').style.display = 'none';\n    const names = document.querySelectorAll('.name');\n    names.forEach(name => name.disabled = true);\n    document.getElementById('0').style.visibility = \"visible\";\n  } //Function to move onto the next player's turn\n\n\n  function handleNextTurn() {\n    document.getElementById(`${counter}`).style.visibility = \"hidden\";\n    const nextCounter = (counter + 1) % players.length;\n\n    if (nextCounter === 0) {\n      setPlayers(oldPlayers => oldPlayers.map(player => {\n        if (player.Id === counter) {\n          return { ...player,\n            Active: false,\n            AlreadyCounting: false\n          };\n        } else {\n          return { ...player\n          };\n        }\n      }));\n      setCounter(counter => nextCounter);\n      checkForOrderChange();\n    } else {\n      document.getElementById(`${nextCounter}`).style.visibility = \"visible\";\n      setPlayers(oldPlayers => oldPlayers.map(player => {\n        if (player.Id === nextCounter) {\n          return { ...player,\n            Active: true\n          };\n        } else if (player.Id === counter) {\n          return { ...player,\n            Active: false,\n            AlreadyCounting: false\n          };\n        } else {\n          return { ...player\n          };\n        }\n      }));\n      setCounter(counter => nextCounter);\n    }\n  } //Function to allow players to change their order\n\n\n  function checkForOrderChange() {\n    const positions = document.querySelectorAll('.position');\n    positions.forEach(pos => pos.disabled = false);\n    document.querySelector('.changeOrder').style.display = 'block';\n  } //Reordering players based on input\n\n\n  function handleOrderChange() {\n    const myArray = [...players];\n    myArray.sort((a, b) => a.Position > b.Position ? 1 : -1);\n    myArray[0].Active = true;\n\n    for (let i = 0; i < myArray.length; i++) {\n      myArray[i].Id = i;\n      console.log(myArray[i]);\n    }\n\n    setPlayers(myArray);\n    const positions = document.querySelectorAll('.position');\n    positions.forEach(pos => pos.disabled = true);\n    document.querySelector('.changeOrder').style.display = 'none';\n    document.getElementById('0').style.visibility = \"visible\";\n  } //Function to change the individual players 'position' (The position attribute will then be used to order the players)\n\n\n  function handleInternalPosition(oldPos, newPos) {\n    setPlayers(oldPlayers => oldPlayers.map(player => player.Id === oldPos ? { ...player,\n      Position: newPos\n    } : { ...player\n    }));\n  } //Function to change the individual players' names\n\n\n  function handleNameChange(newName, position) {\n    setPlayers(oldPlayers => oldPlayers.map(player => player.Id === position ? { ...player,\n      Name: newName\n    } : { ...player\n    }));\n  }\n\n  function endGame() {\n    document.getElementById(`${counter}`).style.visibility = \"hidden\";\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"HoldingDiv\",\n    style: {\n      margin: '10px'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handlePlayers,\n      id: \"StartForm\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        children: [\"Number of Players:\", /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          ref: noPlayersRef\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"submit\",\n        value: \"Submit\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 11\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleTime,\n      style: {\n        display: 'none'\n      },\n      id: \"TimeForm\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        children: [\"Amount of Time (Minutes):\", /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          ref: timeAllowedRef\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 179,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"submit\",\n        value: \"Submit\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 11\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'none'\n      },\n      id: \"StartGame\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Set Player Names\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 15\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleStartGame,\n        children: \"Start Game\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 15\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 11\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(PlayerList, {\n        Players: players,\n        HandleOrderChange: handleOrderChange,\n        HandleNextTurn: handleNextTurn,\n        HandleNameChange: handleNameChange,\n        HandleInternalPosition: handleInternalPosition\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 11\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 168,\n    columnNumber: 9\n  }, this);\n}\n\n_s(PlayerSetup, \"MQIWnGhbjdOtdk5T3/MwX8+njcs=\");\n\n_c = PlayerSetup;\nexport default PlayerSetup; // document.querySelector('#StartForm').style.display = 'none';\n// document.querySelector('#TimeForm').style.display = 'block';\n// const names = document.querySelectorAll('.nameInput');\n// names.forEach(name => name.disabled = false);\n\nvar _c;\n\n$RefreshReg$(_c, \"PlayerSetup\");","map":{"version":3,"sources":["C:/Users/taylo/OneDrive/Documents/WebDevelopment/Learn_React/boardgame_clock/src/PlayerSetup.js"],"names":["React","useState","useRef","useEffect","PlayerList","PlayerSetup","players","setPlayers","counter","setCounter","colors","firstLoad","current","myCounter","Active","now","Date","then","TimeAllowed","timer","setTimeout","Finished","secondsLeft","Math","round","previousPlayers","map","player","Id","console","log","overTime","clearTimeout","numPlayers","timeAllowed","noPlayersRef","handlePlayers","e","preventDefault","value","alert","myArray","i","push","Name","Position","Color","document","querySelector","style","display","timeAllowedRef","handleTime","oldPlayers","names","querySelectorAll","forEach","name","disabled","handleStartGame","getElementById","visibility","handleNextTurn","nextCounter","length","AlreadyCounting","checkForOrderChange","positions","pos","handleOrderChange","sort","a","b","handleInternalPosition","oldPos","newPos","handleNameChange","newName","position","endGame","margin"],"mappings":";;;AAAA,OAAOA,KAAP,IAAeC,QAAf,EAAyBC,MAAzB,EAAiCC,SAAjC,QAAiD,OAAjD;AACA,OAAO,WAAP;AACA,OAAOC,UAAP,MAAuB,iBAAvB;;;AAEA,SAASC,WAAT,GAAsB;AAAA;;AAElB,QAAM,CAACC,OAAD,EAAUC,UAAV,IAAwBN,QAAQ,CAAC,EAAD,CAAtC;AACA,QAAM,CAACO,OAAD,EAAUC,UAAV,IAAwBR,QAAQ,CAAC,CAAD,CAAtC;AAEA,QAAMS,MAAM,GAAG,CAAC,KAAD,EAAQ,OAAR,EAAiB,QAAjB,EAA2B,MAA3B,EAAmC,OAAnC,EAA4C,OAA5C,CAAf,CALkB,CAOlB;;AACA,QAAMC,SAAS,GAAGT,MAAM,CAAC,IAAD,CAAxB;AAEAC,EAAAA,SAAS,CAAC,MAAM;AACZ,QAAIQ,SAAS,CAACC,OAAd,EAAsB;AAClBD,MAAAA,SAAS,CAACC,OAAV,GAAoB,KAApB;AACA;AACH;;AACD,UAAMC,SAAS,GAAGL,OAAlB;;AACA,QAAI,CAACF,OAAO,CAACE,OAAD,CAAP,CAAiBM,MAAtB,EAA6B;AACzB;AACH;;AACD,UAAMC,GAAG,GAAGC,IAAI,CAACD,GAAL,EAAZ;AACA,UAAME,IAAI,GAAGF,GAAG,GAAGT,OAAO,CAACO,SAAD,CAAP,CAAmBK,WAAnB,GAAiC,IAApD;AACA,UAAMC,KAAK,GAAGC,UAAU,CAAC,MAAM;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA,UAAI,CAACd,OAAO,CAACE,OAAD,CAAP,CAAiBa,QAAtB,EAA+B;AAC3B,cAAMC,WAAW,GAAGC,IAAI,CAACC,KAAL,CAAW,CAACP,IAAI,GAAGD,IAAI,CAACD,GAAL,EAAR,IAAsB,IAAjC,CAApB;;AACA,YAAIO,WAAW,IAAI,CAAnB,EAAqB;AACjBf,UAAAA,UAAU,CAACkB,eAAe,IAAIA,eAAe,CAACC,GAAhB,CAAoBC,MAAM,IAAIA,MAAM,CAACC,EAAP,KAAcf,SAAd,GAA0B,EAAC,GAAGc,MAAJ;AAAYT,YAAAA,WAAW,EAAEI,WAAzB;AAAsCD,YAAAA,QAAQ,EAAE;AAAhD,WAA1B,GAAkF,EAAC,GAAGM;AAAJ,WAAhH,CAApB,CAAV;AACAE,UAAAA,OAAO,CAACC,GAAR,CAAYxB,OAAO,CAACE,OAAD,CAAnB;AACH,SAHD,MAGO;AACHD,UAAAA,UAAU,CAACkB,eAAe,IAAIA,eAAe,CAACC,GAAhB,CAAoBC,MAAM,IAAIA,MAAM,CAACC,EAAP,KAAcf,SAAd,GAA0B,EAAC,GAAGc,MAAJ;AAAYT,YAAAA,WAAW,EAAEI;AAAzB,WAA1B,GAAkE,EAAC,GAAGK;AAAJ,WAAhG,CAApB,CAAV;AACH;AACJ,OARD,MAQO;AACH,cAAMI,QAAQ,GAAGR,IAAI,CAACC,KAAL,CAAW,CAACR,IAAI,CAACD,GAAL,KAAWE,IAAZ,IAAoB,IAA/B,CAAjB;AACAV,QAAAA,UAAU,CAACkB,eAAe,IAAIA,eAAe,CAACC,GAAhB,CAAoBC,MAAM,IAAIA,MAAM,CAACC,EAAP,KAAcf,SAAd,GAA0B,EAAC,GAAGc,MAAJ;AAAYT,UAAAA,WAAW,EAAEa;AAAzB,SAA1B,GAA+D,EAAC,GAAGJ;AAAJ,SAA7F,CAApB,CAAV;AAAyI;AAC5I;AACJ,KAnBuB,EAmBrB,IAnBqB,CAAxB;AAoBA,WAAO,MAAMK,YAAY,CAACb,KAAD,CAAzB;AACH,GAhCQ,EAgCN,CAACb,OAAD,EAAUE,OAAV,CAhCM,CAAT;AAkCA,MAAIyB,UAAU,GAAG,CAAjB;AACA,MAAIC,WAAW,GAAG,CAAlB,CA7CkB,CA+ClB;;AACA,QAAMC,YAAY,GAAGjC,MAAM,EAA3B,CAhDkB,CAkDlB;;AACA,WAASkC,aAAT,CAAuBC,CAAvB,EAA0B;AACtBA,IAAAA,CAAC,CAACC,cAAF;AACAL,IAAAA,UAAU,GAAGE,YAAY,CAACvB,OAAb,CAAqB2B,KAAlC;;AACA,QAAI,EAAEN,UAAU,GAAG,CAAb,IAAkBA,UAAU,IAAI,CAAlC,CAAJ,EAA0C;AACtCO,MAAAA,KAAK,CAAC,oDAAD,CAAL;AACA;AACH;;AAAA;AACD,UAAMC,OAAO,GAAG,EAAhB;;AACA,SAAK,IAAIC,CAAC,GAAC,CAAX,EAAcA,CAAC,GAACT,UAAhB,EAA4BS,CAAC,EAA7B,EAAgC;AAC5BD,MAAAA,OAAO,CAACE,IAAR,CAAa;AAACf,QAAAA,EAAE,EAAEc,CAAL;AAAQE,QAAAA,IAAI,EAAG,UAASF,CAAC,GAAC,CAAE,EAA5B;AAA+BG,QAAAA,QAAQ,EAAEH,CAAzC;AAA4CxB,QAAAA,WAAW,EAAEgB,WAAzD;AAAsEpB,QAAAA,MAAM,EAAE,KAA9E;AAAqFgC,QAAAA,KAAK,EAAEpC,MAAM,CAACgC,CAAD,CAAlG;AAAuGrB,QAAAA,QAAQ,EAAE;AAAjH,OAAb;AACH;;AACDd,IAAAA,UAAU,CAACkC,OAAD,CAAV;AACAM,IAAAA,QAAQ,CAACC,aAAT,CAAuB,YAAvB,EAAqCC,KAArC,CAA2CC,OAA3C,GAAqD,MAArD;AACAH,IAAAA,QAAQ,CAACC,aAAT,CAAuB,WAAvB,EAAoCC,KAApC,CAA0CC,OAA1C,GAAoD,OAApD;AACH,GAjEiB,CAmElB;;;AACA,QAAMC,cAAc,GAAGjD,MAAM,EAA7B,CApEkB,CAsElB;;AACA,WAASkD,UAAT,CAAoBf,CAApB,EAAuB;AACnBA,IAAAA,CAAC,CAACC,cAAF;AACAJ,IAAAA,WAAW,GAAGiB,cAAc,CAACvC,OAAf,CAAuB2B,KAArC;;AACA,QAAI,EAAEL,WAAW,IAAI,KAAKA,WAAW,IAAI,GAArC,CAAJ,EAA+C;AAC3CM,MAAAA,KAAK,CAAC,mDAAD,CAAL;AACA;AACH;;AAAA;AACDjC,IAAAA,UAAU,CAAC8C,UAAU,IAAIA,UAAU,CAAC3B,GAAX,CAAeC,MAAM,IAAI;AAC9C,aAAO,EAAC,GAAGA,MAAJ;AAAYT,QAAAA,WAAW,EAAEgB,WAAW,GAAC;AAArC,OAAP;AACH,KAFwB,CAAf,CAAV;AAGAa,IAAAA,QAAQ,CAACC,aAAT,CAAuB,WAAvB,EAAoCC,KAApC,CAA0CC,OAA1C,GAAoD,MAApD;AACAH,IAAAA,QAAQ,CAACC,aAAT,CAAuB,YAAvB,EAAqCC,KAArC,CAA2CC,OAA3C,GAAqD,OAArD;AACA,UAAMI,KAAK,GAAGP,QAAQ,CAACQ,gBAAT,CAA0B,OAA1B,CAAd;AACAD,IAAAA,KAAK,CAACE,OAAN,CAAcC,IAAI,IAAIA,IAAI,CAACC,QAAL,GAAgB,KAAtC;AACH,GArFiB,CAuFlB;;;AACA,WAASC,eAAT,CAAyBtB,CAAzB,EAA2B;AACvB9B,IAAAA,UAAU,CAAC8C,UAAU,IAAIA,UAAU,CAAC3B,GAAX,CAAeC,MAAM,IAAIA,MAAM,CAACC,EAAP,KAAc,CAAd,GAAkB,EAAC,GAAGD,MAAJ;AAAYb,MAAAA,MAAM,EAAE;AAApB,KAAlB,GAA8C,EAAC,GAAGa;AAAJ,KAAvE,CAAf,CAAV;AACAoB,IAAAA,QAAQ,CAACC,aAAT,CAAuB,YAAvB,EAAqCC,KAArC,CAA2CC,OAA3C,GAAqD,MAArD;AACA,UAAMI,KAAK,GAAGP,QAAQ,CAACQ,gBAAT,CAA0B,OAA1B,CAAd;AACAD,IAAAA,KAAK,CAACE,OAAN,CAAcC,IAAI,IAAIA,IAAI,CAACC,QAAL,GAAgB,IAAtC;AACAX,IAAAA,QAAQ,CAACa,cAAT,CAAwB,GAAxB,EAA6BX,KAA7B,CAAmCY,UAAnC,GAA8C,SAA9C;AACH,GA9FiB,CAgGlB;;;AACA,WAASC,cAAT,GAAyB;AACrBf,IAAAA,QAAQ,CAACa,cAAT,CAAyB,GAAEpD,OAAQ,EAAnC,EAAsCyC,KAAtC,CAA4CY,UAA5C,GAAuD,QAAvD;AACA,UAAME,WAAW,GAAG,CAACvD,OAAO,GAAG,CAAX,IAAgBF,OAAO,CAAC0D,MAA5C;;AACA,QAAID,WAAW,KAAK,CAApB,EAAsB;AAClBxD,MAAAA,UAAU,CAAC8C,UAAU,IAAIA,UAAU,CAAC3B,GAAX,CAAeC,MAAM,IAAI;AAC9C,YAAIA,MAAM,CAACC,EAAP,KAAcpB,OAAlB,EAA0B;AACtB,iBAAO,EAAC,GAAGmB,MAAJ;AAAYb,YAAAA,MAAM,EAAE,KAApB;AAA2BmD,YAAAA,eAAe,EAAE;AAA5C,WAAP;AACH,SAFD,MAEO;AACH,iBAAO,EAAC,GAAGtC;AAAJ,WAAP;AACH;AACJ,OANwB,CAAf,CAAV;AAOAlB,MAAAA,UAAU,CAACD,OAAO,IAAIuD,WAAZ,CAAV;AACAG,MAAAA,mBAAmB;AACtB,KAVD,MAUO;AACHnB,MAAAA,QAAQ,CAACa,cAAT,CAAyB,GAAEG,WAAY,EAAvC,EAA0Cd,KAA1C,CAAgDY,UAAhD,GAA2D,SAA3D;AACAtD,MAAAA,UAAU,CAAC8C,UAAU,IAAIA,UAAU,CAAC3B,GAAX,CAAeC,MAAM,IAAI;AAC9C,YAAIA,MAAM,CAACC,EAAP,KAAcmC,WAAlB,EAA8B;AAC1B,iBAAO,EAAC,GAAGpC,MAAJ;AAAYb,YAAAA,MAAM,EAAE;AAApB,WAAP;AACH,SAFD,MAEO,IAAIa,MAAM,CAACC,EAAP,KAAcpB,OAAlB,EAA0B;AAC7B,iBAAO,EAAC,GAAGmB,MAAJ;AAAYb,YAAAA,MAAM,EAAE,KAApB;AAA2BmD,YAAAA,eAAe,EAAE;AAA5C,WAAP;AACH,SAFM,MAEA;AACH,iBAAO,EAAC,GAAGtC;AAAJ,WAAP;AACH;AACJ,OARwB,CAAf,CAAV;AASAlB,MAAAA,UAAU,CAACD,OAAO,IAAIuD,WAAZ,CAAV;AACH;AACJ,GA3HiB,CA6HlB;;;AACA,WAASG,mBAAT,GAA8B;AAC1B,UAAMC,SAAS,GAAGpB,QAAQ,CAACQ,gBAAT,CAA0B,WAA1B,CAAlB;AACAY,IAAAA,SAAS,CAACX,OAAV,CAAkBY,GAAG,IAAIA,GAAG,CAACV,QAAJ,GAAe,KAAxC;AACAX,IAAAA,QAAQ,CAACC,aAAT,CAAuB,cAAvB,EAAuCC,KAAvC,CAA6CC,OAA7C,GAAuD,OAAvD;AACH,GAlIiB,CAoIlB;;;AACA,WAASmB,iBAAT,GAA4B;AACxB,UAAM5B,OAAO,GAAG,CAAC,GAAGnC,OAAJ,CAAhB;AACAmC,IAAAA,OAAO,CAAC6B,IAAR,CAAa,CAACC,CAAD,EAAGC,CAAH,KAASD,CAAC,CAAC1B,QAAF,GAAa2B,CAAC,CAAC3B,QAAf,GAA0B,CAA1B,GAA8B,CAAC,CAArD;AACAJ,IAAAA,OAAO,CAAC,CAAD,CAAP,CAAW3B,MAAX,GAAoB,IAApB;;AACA,SAAK,IAAI4B,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGD,OAAO,CAACuB,MAA5B,EAAoCtB,CAAC,EAArC,EAAwC;AACpCD,MAAAA,OAAO,CAACC,CAAD,CAAP,CAAWd,EAAX,GAAgBc,CAAhB;AACAb,MAAAA,OAAO,CAACC,GAAR,CAAYW,OAAO,CAACC,CAAD,CAAnB;AACH;;AACDnC,IAAAA,UAAU,CAACkC,OAAD,CAAV;AACA,UAAM0B,SAAS,GAAGpB,QAAQ,CAACQ,gBAAT,CAA0B,WAA1B,CAAlB;AACAY,IAAAA,SAAS,CAACX,OAAV,CAAkBY,GAAG,IAAIA,GAAG,CAACV,QAAJ,GAAe,IAAxC;AACAX,IAAAA,QAAQ,CAACC,aAAT,CAAuB,cAAvB,EAAuCC,KAAvC,CAA6CC,OAA7C,GAAuD,MAAvD;AACAH,IAAAA,QAAQ,CAACa,cAAT,CAAwB,GAAxB,EAA6BX,KAA7B,CAAmCY,UAAnC,GAA8C,SAA9C;AACH,GAlJiB,CAoJlB;;;AACA,WAASY,sBAAT,CAAgCC,MAAhC,EAAwCC,MAAxC,EAAgD;AAC5CpE,IAAAA,UAAU,CAAE8C,UAAD,IAAgBA,UAAU,CAAC3B,GAAX,CAAeC,MAAM,IAAIA,MAAM,CAACC,EAAP,KAAc8C,MAAd,GAAuB,EAAC,GAAG/C,MAAJ;AAAYkB,MAAAA,QAAQ,EAAE8B;AAAtB,KAAvB,GAAuD,EAAC,GAAGhD;AAAJ,KAAhF,CAAjB,CAAV;AACH,GAvJiB,CAyJlB;;;AACA,WAASiD,gBAAT,CAA0BC,OAA1B,EAAmCC,QAAnC,EAA4C;AACxCvE,IAAAA,UAAU,CAAE8C,UAAD,IAAgBA,UAAU,CAAC3B,GAAX,CAAeC,MAAM,IAAIA,MAAM,CAACC,EAAP,KAAckD,QAAd,GAAyB,EAAC,GAAGnD,MAAJ;AAAYiB,MAAAA,IAAI,EAAEiC;AAAlB,KAAzB,GAAsD,EAAC,GAAGlD;AAAJ,KAA/E,CAAjB,CAAV;AACH;;AAED,WAASoD,OAAT,GAAkB;AACdhC,IAAAA,QAAQ,CAACa,cAAT,CAAyB,GAAEpD,OAAQ,EAAnC,EAAsCyC,KAAtC,CAA4CY,UAA5C,GAAuD,QAAvD;AACH;;AAED,sBACI;AAAK,IAAA,SAAS,EAAC,YAAf;AAA4B,IAAA,KAAK,EAAE;AAACmB,MAAAA,MAAM,EAAE;AAAT,KAAnC;AAAA,4BACE;AAAM,MAAA,QAAQ,EAAE5C,aAAhB;AAA+B,MAAA,EAAE,EAAC,WAAlC;AAAA,8BACE;AAAA,sDAEE;AAAO,UAAA,IAAI,EAAC,QAAZ;AAAqB,UAAA,GAAG,EAAED;AAA1B;AAAA;AAAA;AAAA;AAAA,gBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,cADF,eAKE;AAAO,QAAA,IAAI,EAAC,QAAZ;AAAqB,QAAA,KAAK,EAAC;AAA3B;AAAA;AAAA;AAAA;AAAA,cALF;AAAA;AAAA;AAAA;AAAA;AAAA,YADF,eAQE;AAAM,MAAA,QAAQ,EAAEiB,UAAhB;AAA4B,MAAA,KAAK,EAAE;AAACF,QAAAA,OAAO,EAAE;AAAV,OAAnC;AAAsD,MAAA,EAAE,EAAC,UAAzD;AAAA,8BACE;AAAA,6DAEE;AAAO,UAAA,IAAI,EAAC,QAAZ;AAAqB,UAAA,GAAG,EAAEC;AAA1B;AAAA;AAAA;AAAA;AAAA,gBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,cADF,eAKE;AAAO,QAAA,IAAI,EAAC,QAAZ;AAAqB,QAAA,KAAK,EAAC;AAA3B;AAAA;AAAA;AAAA;AAAA,cALF;AAAA;AAAA;AAAA;AAAA;AAAA,YARF,eAeE;AAAK,MAAA,KAAK,EAAE;AAACD,QAAAA,OAAO,EAAE;AAAV,OAAZ;AAA+B,MAAA,EAAE,EAAC,WAAlC;AAAA,8BACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADJ,eAEI;AAAQ,QAAA,OAAO,EAAES,eAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,YAfF,eAmBE;AAAA,6BACE,QAAC,UAAD;AACI,QAAA,OAAO,EAAIrD,OADf;AAEI,QAAA,iBAAiB,EAAI+D,iBAFzB;AAGI,QAAA,cAAc,EAAIP,cAHtB;AAII,QAAA,gBAAgB,EAAIc,gBAJxB;AAKI,QAAA,sBAAsB,EAAIH;AAL9B;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,YAnBF;AAAA;AAAA;AAAA;AAAA;AAAA,UADJ;AAiCH;;GAnMQpE,W;;KAAAA,W;AAqMT,eAAeA,WAAf,C,CAIQ;AACA;AACA;AACA","sourcesContent":["import React, {useState, useRef, useEffect} from 'react';\r\nimport './App.css';\r\nimport PlayerList from './PlayerList.js';\r\n\r\nfunction PlayerSetup(){\r\n\r\n    const [players, setPlayers] = useState([]);\r\n    const [counter, setCounter] = useState(0);\r\n\r\n    const colors = ['red', 'green', 'yellow', 'blue', 'white', 'black'];\r\n\r\n    // Ref so that UseEffect is not run when the page is first loaded\r\n    const firstLoad = useRef(true);\r\n\r\n    useEffect(() => {\r\n        if (firstLoad.current){\r\n            firstLoad.current = false;\r\n            return;\r\n        }\r\n        const myCounter = counter;\r\n        if (!players[counter].Active){\r\n            return;\r\n        }\r\n        const now = Date.now();\r\n        const then = now + players[myCounter].TimeAllowed * 1000;\r\n        const timer = setTimeout(() => {\r\n            //check if we should stop the timer\r\n            // if(!players[myCounter].Active || myCounter !== counter){\r\n            //     console.log(\"Out!\");\r\n            //     clearTimeout(timer);\r\n            //     return;\r\n            // };\r\n            if (!players[counter].Finished){\r\n                const secondsLeft = Math.round((then - Date.now()) / 1000);\r\n                if (secondsLeft <= 0){\r\n                    setPlayers(previousPlayers => previousPlayers.map(player => player.Id === myCounter ? {...player, TimeAllowed: secondsLeft, Finished: true} : {...player}));\r\n                    console.log(players[counter]);\r\n                } else {\r\n                    setPlayers(previousPlayers => previousPlayers.map(player => player.Id === myCounter ? {...player, TimeAllowed: secondsLeft} : {...player}));\r\n                }\r\n            } else {\r\n                const overTime = Math.round((Date.now()-then) / 1000);\r\n                setPlayers(previousPlayers => previousPlayers.map(player => player.Id === myCounter ? {...player, TimeAllowed: overTime} : {...player}));;\r\n            }\r\n        }, 1000);\r\n        return () => clearTimeout(timer);\r\n    }, [players, counter]);\r\n\r\n    let numPlayers = 0;\r\n    let timeAllowed = 0;\r\n\r\n    // Ref to save and use the input for amount of time\r\n    const noPlayersRef = useRef();\r\n\r\n    //Set number of players based on Input\r\n    function handlePlayers(e) {\r\n        e.preventDefault();\r\n        numPlayers = noPlayersRef.current.value;\r\n        if (!(numPlayers > 1 && numPlayers <= 6)) {\r\n            alert('Invalid amount of Players, must be between 2 and 6');\r\n            return;\r\n        };\r\n        const myArray = [];\r\n        for (let i=0; i<numPlayers; i++){\r\n            myArray.push({Id: i, Name: `Player ${i+1}`, Position: i, TimeAllowed: timeAllowed, Active: false, Color: colors[i], Finished: false});\r\n        }\r\n        setPlayers(myArray);\r\n        document.querySelector('#StartForm').style.display = 'none';\r\n        document.querySelector('#TimeForm').style.display = 'block';\r\n    }\r\n\r\n    // Ref to save and use the input for amount of time\r\n    const timeAllowedRef = useRef();\r\n\r\n    //Set amount of time allowed based on input\r\n    function handleTime(e) {\r\n        e.preventDefault();\r\n        timeAllowed = timeAllowedRef.current.value;\r\n        if (!(timeAllowed => 1 && timeAllowed <= 300)) {\r\n            alert('Invalid amount of Time, must be between 1 and 300');\r\n            return;\r\n        };\r\n        setPlayers(oldPlayers => oldPlayers.map(player => {\r\n            return {...player, TimeAllowed: timeAllowed*60};\r\n        }))\r\n        document.querySelector('#TimeForm').style.display = 'none';\r\n        document.querySelector('#StartGame').style.display = 'block';\r\n        const names = document.querySelectorAll('.name');\r\n        names.forEach(name => name.disabled = false);\r\n    }\r\n\r\n    //Function to start the game\r\n    function handleStartGame(e){\r\n        setPlayers(oldPlayers => oldPlayers.map(player => player.Id === 0 ? {...player, Active: true} : {...player}));\r\n        document.querySelector('#StartGame').style.display = 'none';\r\n        const names = document.querySelectorAll('.name');\r\n        names.forEach(name => name.disabled = true);\r\n        document.getElementById('0').style.visibility=\"visible\";\r\n    }\r\n\r\n    //Function to move onto the next player's turn\r\n    function handleNextTurn(){\r\n        document.getElementById(`${counter}`).style.visibility=\"hidden\";\r\n        const nextCounter = (counter + 1) % players.length;\r\n        if (nextCounter === 0){\r\n            setPlayers(oldPlayers => oldPlayers.map(player => {\r\n                if (player.Id === counter){\r\n                    return {...player, Active: false, AlreadyCounting: false}\r\n                } else {\r\n                    return {...player};\r\n                }\r\n            }));\r\n            setCounter(counter => nextCounter);\r\n            checkForOrderChange();\r\n        } else {\r\n            document.getElementById(`${nextCounter}`).style.visibility=\"visible\";\r\n            setPlayers(oldPlayers => oldPlayers.map(player => {\r\n                if (player.Id === nextCounter){\r\n                    return {...player, Active: true}\r\n                } else if (player.Id === counter){\r\n                    return {...player, Active: false, AlreadyCounting: false}\r\n                } else {\r\n                    return {...player};\r\n                }\r\n            }));\r\n            setCounter(counter => nextCounter);\r\n        }\r\n    }\r\n\r\n    //Function to allow players to change their order\r\n    function checkForOrderChange(){\r\n        const positions = document.querySelectorAll('.position');\r\n        positions.forEach(pos => pos.disabled = false);\r\n        document.querySelector('.changeOrder').style.display = 'block';\r\n    }\r\n\r\n    //Reordering players based on input\r\n    function handleOrderChange(){\r\n        const myArray = [...players];\r\n        myArray.sort((a,b) => a.Position > b.Position ? 1 : -1);\r\n        myArray[0].Active = true;\r\n        for (let i = 0; i < myArray.length; i++){\r\n            myArray[i].Id = i;\r\n            console.log(myArray[i]);\r\n        }\r\n        setPlayers(myArray);\r\n        const positions = document.querySelectorAll('.position');\r\n        positions.forEach(pos => pos.disabled = true);\r\n        document.querySelector('.changeOrder').style.display = 'none';\r\n        document.getElementById('0').style.visibility=\"visible\";\r\n    }\r\n\r\n    //Function to change the individual players 'position' (The position attribute will then be used to order the players)\r\n    function handleInternalPosition(oldPos, newPos) {\r\n        setPlayers((oldPlayers) => oldPlayers.map(player => player.Id === oldPos ? {...player, Position: newPos} : {...player}));\r\n    }\r\n\r\n    //Function to change the individual players' names\r\n    function handleNameChange(newName, position){\r\n        setPlayers((oldPlayers) => oldPlayers.map(player => player.Id === position ? {...player, Name: newName} : {...player}));\r\n    }\r\n\r\n    function endGame(){\r\n        document.getElementById(`${counter}`).style.visibility=\"hidden\";\r\n    }\r\n\r\n    return(\r\n        <div className=\"HoldingDiv\" style={{margin: '10px'}}>\r\n          <form onSubmit={handlePlayers} id=\"StartForm\">\r\n            <label>\r\n              Number of Players:\r\n              <input type=\"number\" ref={noPlayersRef} />\r\n            </label>\r\n            <input type=\"submit\" value=\"Submit\" />\r\n          </form>\r\n          <form onSubmit={handleTime} style={{display: 'none'}} id=\"TimeForm\">\r\n            <label>\r\n              Amount of Time (Minutes):\r\n              <input type=\"number\" ref={timeAllowedRef} />\r\n            </label>\r\n            <input type=\"submit\" value=\"Submit\" />\r\n          </form>\r\n          <div style={{display: 'none'}} id=\"StartGame\">\r\n              <p>Set Player Names</p>\r\n              <button onClick={handleStartGame}>Start Game</button>\r\n          </div>\r\n          <div>\r\n            <PlayerList\r\n                Players = {players}\r\n                HandleOrderChange = {handleOrderChange}\r\n                HandleNextTurn = {handleNextTurn}\r\n                HandleNameChange = {handleNameChange}\r\n                HandleInternalPosition = {handleInternalPosition}\r\n            />\r\n          </div>\r\n        </div>\r\n    );\r\n\r\n\r\n}\r\n\r\nexport default PlayerSetup;\r\n\r\n\r\n\r\n        // document.querySelector('#StartForm').style.display = 'none';\r\n        // document.querySelector('#TimeForm').style.display = 'block';\r\n        // const names = document.querySelectorAll('.nameInput');\r\n        // names.forEach(name => name.disabled = false);\r\n"]},"metadata":{},"sourceType":"module"}