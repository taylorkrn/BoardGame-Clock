{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\taylo\\\\OneDrive\\\\Documents\\\\WebDevelopment\\\\Learn_React\\\\boardgame_clock\\\\src\\\\PlayerSetup.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useRef, useEffect } from 'react';\nimport './App.css';\nimport PlayerList from './PlayerList.js';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction PlayerSetup() {\n  _s();\n\n  const [numPlayers, setNumPlayers] = useState(0);\n  const [timeAllowed, setTimeAllowed] = useState(0);\n  const [players, setPlayers] = useState([]);\n  const [counter, setCounter] = useState(0);\n  const noPlayersRef = useRef();\n\n  function handlePlayers(e) {\n    e.preventDefault();\n    const noPlayers = noPlayersRef.current.value;\n\n    if (!(noPlayers > 1 && noPlayers <= 6)) {\n      alert('Invalid amount of Players, must be between 2 and 6');\n      return;\n    }\n\n    ;\n    setNumPlayers(noPlayers);\n    const myArray = [];\n\n    for (let i = 0; i < noPlayers; i++) {\n      myArray.push({\n        Id: i,\n        Name: `Player ${i + 1}`,\n        Position: i + 1,\n        TimeAllowed: timeAllowed,\n        Active: false\n      });\n    }\n\n    setPlayers(myArray);\n    document.querySelector('#StartForm').style.display = 'none';\n    document.querySelector('#TimeForm').style.display = 'block';\n  }\n\n  const timeAllowedRef = useRef();\n\n  function handleTime(e) {\n    e.preventDefault();\n    const timeLimit = timeAllowedRef.current.value;\n\n    if (!(timeLimit => 1 && timeLimit <= 300)) {\n      alert('Invalid amount of Time, must be between 1 and 300');\n      return;\n    }\n\n    ;\n    setTimeAllowed(timeLimit);\n    setPlayers(oldPlayers => oldPlayers.map(player => {\n      return { ...player,\n        TimeAllowed: timeLimit * 60\n      };\n    })); // const myArray = [...players];\n    // for (let i=0; i<numPlayers; i++){\n    //     myArray[i].TimeAllowed = timeLimit*60;\n    // }\n    // setPlayers(myArray);\n\n    document.querySelector('#TimeForm').style.display = 'none';\n    document.querySelector('#StartGame').style.display = 'block';\n    const names = document.querySelectorAll('.name');\n    names.forEach(name => name.disabled = false);\n  }\n\n  function handleStartGame(e) {\n    const myArray = [...players];\n    myArray[0].Active = true;\n    document.querySelector('#StartGame').style.display = 'none';\n    const names = document.querySelectorAll('.name');\n    names.forEach(name => name.disabled = true);\n    document.getElementById('1').style.visibility = \"visible\";\n    setPlayers([...myArray]);\n    handleCountdown(0);\n  }\n\n  function handleNextTurn() {\n    const myArray = [...players];\n    myArray[counter].Active = false;\n    document.getElementById(`${counter + 1}`).style.visibility = \"hidden\";\n    const nextCounter = (counter + 1) % numPlayers;\n    setCounter(nextCounter);\n\n    if (nextCounter === 0) {\n      setPlayers([...myArray]);\n      checkForOrderChange();\n      return;\n    }\n\n    myArray[nextCounter].Active = true;\n    setPlayers([...myArray]);\n    document.getElementById(`${nextCounter + 1}`).style.visibility = \"visible\";\n    handleCountdown(nextCounter);\n  }\n\n  function handleCountdown(myCounter) {\n    const activePlayer = players[myCounter];\n    const now = Date.now();\n    const then = now + activePlayer.TimeAllowed * 1000;\n    const interval = setInterval(() => {\n      //check if we should stop the timer\n      if (!players[myCounter].Active) {\n        clearInterval(interval);\n        return;\n      }\n\n      ;\n      const secondsLeft = Math.round((then - Date.now()) / 1000);\n\n      if (secondsLeft <= 0) {\n        alert(`${activePlayer.name} ran out of time`);\n        clearInterval(interval);\n        return;\n      }\n\n      const myArray = [...players];\n      myArray[myCounter].TimeAllowed = secondsLeft;\n      setPlayers([...myArray]);\n    }, 1000);\n  }\n\n  function checkForOrderChange() {\n    const positions = document.querySelectorAll('.position');\n    positions.forEach(pos => pos.disabled = false);\n    document.querySelector('.changeOrder').style.display = 'block';\n  }\n\n  function handleOrderChange() {\n    const myArray = [...players];\n    myArray.sort((a, b) => a.Position > b.Position ? 1 : -1);\n    setPlayers(oldPlayers => {\n      oldPlayers.map(player => {\n        return { ...player,\n          Name: myArray[player.Position - 1].Name,\n          Position: myArray[player.Position - 1].Position,\n          TimeAllowed: myArray[player.Position - 1].TimeAllowed\n        };\n      });\n    });\n    console.log(players); // setPlayers(oldPlayers => {oldPlayers.map((player) => player.Position === 1 ? {...player, Active: true} : {...player})});\n\n    const positions = document.querySelectorAll('.position');\n    positions.forEach(pos => pos.disabled = true);\n    document.querySelector('.changeOrder').style.display = 'none';\n    document.getElementById('1').style.visibility = \"visible\";\n    handleCountdown(0);\n  }\n\n  function handleInternalPosition(oldPos, newPos) {\n    const myArray = [...players];\n    myArray[oldPos].Position = newPos;\n    setPlayers([...myArray]);\n  }\n\n  function handleNameChange(newName, position) {\n    const myArray = [...players];\n    myArray[position].Name = newName;\n    setPlayers([...myArray]);\n  }\n\n  function endGame() {\n    document.getElementById(`${counter + 1}`).style.visibility = \"hidden\";\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      margin: '10px'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handlePlayers,\n      id: \"StartForm\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        children: [\"Number of Players:\", /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          ref: noPlayersRef\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"submit\",\n        value: \"Submit\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 11\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleTime,\n      style: {\n        display: 'none'\n      },\n      id: \"TimeForm\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        children: [\"Amount of Time (Minutes):\", /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          ref: timeAllowedRef\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"submit\",\n        value: \"Submit\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 11\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'none'\n      },\n      id: \"StartGame\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Set Player Names\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 15\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleStartGame,\n        children: \"Start Game\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 15\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 11\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(PlayerList, {\n        Players: players,\n        HandleOrderChange: handleOrderChange,\n        HandleNextTurn: handleNextTurn,\n        HandleNameChange: handleNameChange,\n        HandleInternalPosition: handleInternalPosition\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 11\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 144,\n    columnNumber: 9\n  }, this);\n}\n\n_s(PlayerSetup, \"M0rgEaLf+2qRrJQhlrUYFMBUodY=\");\n\n_c = PlayerSetup;\nexport default PlayerSetup; // document.querySelector('#StartForm').style.display = 'none';\n// document.querySelector('#TimeForm').style.display = 'block';\n// const names = document.querySelectorAll('.nameInput');\n// names.forEach(name => name.disabled = false);\n\nvar _c;\n\n$RefreshReg$(_c, \"PlayerSetup\");","map":{"version":3,"sources":["C:/Users/taylo/OneDrive/Documents/WebDevelopment/Learn_React/boardgame_clock/src/PlayerSetup.js"],"names":["React","useState","useRef","useEffect","PlayerList","PlayerSetup","numPlayers","setNumPlayers","timeAllowed","setTimeAllowed","players","setPlayers","counter","setCounter","noPlayersRef","handlePlayers","e","preventDefault","noPlayers","current","value","alert","myArray","i","push","Id","Name","Position","TimeAllowed","Active","document","querySelector","style","display","timeAllowedRef","handleTime","timeLimit","oldPlayers","map","player","names","querySelectorAll","forEach","name","disabled","handleStartGame","getElementById","visibility","handleCountdown","handleNextTurn","nextCounter","checkForOrderChange","myCounter","activePlayer","now","Date","then","interval","setInterval","clearInterval","secondsLeft","Math","round","positions","pos","handleOrderChange","sort","a","b","console","log","handleInternalPosition","oldPos","newPos","handleNameChange","newName","position","endGame","margin"],"mappings":"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","sourcesContent":["import React, {useState, useRef, useEffect} from 'react';\r\nimport './App.css';\r\nimport PlayerList from './PlayerList.js';\r\n\r\nfunction PlayerSetup(){\r\n\r\n    const [numPlayers, setNumPlayers] = useState(0);\r\n    const [timeAllowed, setTimeAllowed] = useState(0);\r\n    const [players, setPlayers] = useState([]);\r\n    const [counter, setCounter] = useState(0);\r\n\r\n\r\n    const noPlayersRef = useRef();\r\n\r\n    function handlePlayers(e) {\r\n        e.preventDefault();\r\n        const noPlayers = noPlayersRef.current.value;\r\n        if (!(noPlayers > 1 && noPlayers <= 6)) {\r\n            alert('Invalid amount of Players, must be between 2 and 6');\r\n            return;\r\n        };\r\n        setNumPlayers(noPlayers);\r\n        const myArray = [];\r\n        for (let i=0; i<noPlayers; i++){\r\n            myArray.push({Id: i, Name: `Player ${i+1}`, Position: i+1, TimeAllowed: timeAllowed, Active: false});\r\n        }\r\n        setPlayers(myArray);\r\n        document.querySelector('#StartForm').style.display = 'none';\r\n        document.querySelector('#TimeForm').style.display = 'block';\r\n    }\r\n\r\n    const timeAllowedRef = useRef();\r\n\r\n    function handleTime(e) {\r\n        e.preventDefault();\r\n        const timeLimit = timeAllowedRef.current.value;\r\n        if (!(timeLimit => 1 && timeLimit <= 300)) {\r\n            alert('Invalid amount of Time, must be between 1 and 300');\r\n            return;\r\n        };\r\n        setTimeAllowed(timeLimit);\r\n        setPlayers((oldPlayers) => oldPlayers.map(player => {\r\n            return {...player, TimeAllowed: timeLimit*60};\r\n        }))\r\n        // const myArray = [...players];\r\n        // for (let i=0; i<numPlayers; i++){\r\n        //     myArray[i].TimeAllowed = timeLimit*60;\r\n        // }\r\n        // setPlayers(myArray);\r\n        document.querySelector('#TimeForm').style.display = 'none';\r\n        document.querySelector('#StartGame').style.display = 'block';\r\n        const names = document.querySelectorAll('.name');\r\n        names.forEach(name => name.disabled = false);\r\n    }\r\n\r\n    function handleStartGame(e){\r\n        const myArray = [...players];\r\n        myArray[0].Active = true;\r\n        document.querySelector('#StartGame').style.display = 'none';\r\n        const names = document.querySelectorAll('.name');\r\n        names.forEach(name => name.disabled = true);\r\n        document.getElementById('1').style.visibility=\"visible\";\r\n        setPlayers([...myArray]);\r\n        handleCountdown(0);\r\n    }\r\n\r\n    function handleNextTurn(){\r\n        const myArray = [...players];\r\n        myArray[counter].Active = false;\r\n        document.getElementById(`${counter+1}`).style.visibility=\"hidden\";\r\n        const nextCounter = (counter + 1) % numPlayers;\r\n        setCounter(nextCounter);\r\n        if (nextCounter === 0){\r\n            setPlayers([...myArray]);\r\n            checkForOrderChange();\r\n            return;\r\n        }\r\n        myArray[nextCounter].Active = true;\r\n        setPlayers([...myArray]);\r\n        document.getElementById(`${nextCounter+1}`).style.visibility=\"visible\";\r\n        handleCountdown(nextCounter);\r\n    }\r\n\r\n    function handleCountdown(myCounter){\r\n        const activePlayer = players[myCounter];\r\n        const now = Date.now();\r\n        const then = now + activePlayer.TimeAllowed * 1000;\r\n        const interval = setInterval(() => {\r\n            //check if we should stop the timer\r\n            if(!players[myCounter].Active){\r\n                clearInterval(interval);\r\n                return;\r\n            };\r\n            const secondsLeft = Math.round((then - Date.now()) / 1000);\r\n            if (secondsLeft <= 0){\r\n                alert(`${activePlayer.name} ran out of time`);\r\n                clearInterval(interval);\r\n                return;\r\n            }\r\n            const myArray = [...players];\r\n            myArray[myCounter].TimeAllowed = secondsLeft;\r\n            setPlayers([...myArray]);\r\n        }, 1000);\r\n    }\r\n\r\n    function checkForOrderChange(){\r\n        const positions = document.querySelectorAll('.position');\r\n        positions.forEach(pos => pos.disabled = false);\r\n        document.querySelector('.changeOrder').style.display = 'block';\r\n    }\r\n\r\n    function handleOrderChange(){\r\n        const myArray = [...players];\r\n        myArray.sort((a,b) => a.Position > b.Position ? 1 : -1);\r\n        setPlayers(oldPlayers => {oldPlayers.map((player) => {\r\n            return {...player, Name: myArray[player.Position - 1].Name, Position: myArray[player.Position - 1].Position, TimeAllowed: myArray[player.Position - 1].TimeAllowed}\r\n        })});\r\n        console.log(players);\r\n        // setPlayers(oldPlayers => {oldPlayers.map((player) => player.Position === 1 ? {...player, Active: true} : {...player})});\r\n        const positions = document.querySelectorAll('.position');\r\n        positions.forEach(pos => pos.disabled = true);\r\n        document.querySelector('.changeOrder').style.display = 'none';\r\n        document.getElementById('1').style.visibility=\"visible\";\r\n        handleCountdown(0);\r\n    }\r\n\r\n    function handleInternalPosition(oldPos, newPos) {\r\n        const myArray = [...players];\r\n        myArray[oldPos].Position = newPos;\r\n        setPlayers([...myArray]);\r\n    }\r\n\r\n    function handleNameChange(newName, position){\r\n        const myArray = [...players];\r\n        myArray[position].Name = newName;\r\n        setPlayers([...myArray]);\r\n    }\r\n\r\n    function endGame(){\r\n        document.getElementById(`${counter+1}`).style.visibility=\"hidden\";\r\n    }\r\n\r\n    return(\r\n        <div style={{margin: '10px'}}>\r\n          <form onSubmit={handlePlayers} id=\"StartForm\">\r\n            <label>\r\n              Number of Players:\r\n              <input type=\"number\" ref={noPlayersRef} />\r\n            </label>\r\n            <input type=\"submit\" value=\"Submit\" />\r\n          </form>\r\n          <form onSubmit={handleTime} style={{display: 'none'}} id=\"TimeForm\">\r\n            <label>\r\n              Amount of Time (Minutes):\r\n              <input type=\"number\" ref={timeAllowedRef} />\r\n            </label>\r\n            <input type=\"submit\" value=\"Submit\" />\r\n          </form>\r\n          <div style={{display: 'none'}} id=\"StartGame\">\r\n              <p>Set Player Names</p>\r\n              <button onClick={handleStartGame}>Start Game</button>\r\n          </div>\r\n          <div>\r\n            <PlayerList\r\n                Players = {players}\r\n                HandleOrderChange = {handleOrderChange}\r\n                HandleNextTurn = {handleNextTurn}\r\n                HandleNameChange = {handleNameChange}\r\n                HandleInternalPosition = {handleInternalPosition}\r\n            />\r\n          </div>\r\n        </div>\r\n    );\r\n\r\n\r\n}\r\n\r\nexport default PlayerSetup;\r\n\r\n\r\n\r\n        // document.querySelector('#StartForm').style.display = 'none';\r\n        // document.querySelector('#TimeForm').style.display = 'block';\r\n        // const names = document.querySelectorAll('.nameInput');\r\n        // names.forEach(name => name.disabled = false);\r\n"]},"metadata":{},"sourceType":"module"}