{"ast":null,"code":"import _toConsumableArray from\"C:/Users/taylo/OneDrive/Documents/WebDevelopment/Learn_React/boardgame_clock/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _objectSpread from\"C:/Users/taylo/OneDrive/Documents/WebDevelopment/Learn_React/boardgame_clock/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"C:/Users/taylo/OneDrive/Documents/WebDevelopment/Learn_React/boardgame_clock/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useRef,useEffect}from'react';import'./App.css';import PlayerList from'./PlayerList.js';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function PlayerSetup(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),players=_useState2[0],setPlayers=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),counter=_useState4[0],setCounter=_useState4[1];var colors=['red','green','yellow','blue','white','black'];// Ref so that UseEffect is not run when the page is first loaded\nvar firstLoad=useRef(true);useEffect(function(){if(firstLoad.current){firstLoad.current=false;return;}var myCounter=counter;if(!players[counter].Active){return;}var now=Date.now();var then=now+players[myCounter].TimeAllowed*1000;var timer=setTimeout(function(){//check if we should stop the timer\nif(!players[myCounter].Active||myCounter!==counter){console.log(\"Out!\");clearTimeout(timer);return;};var secondsLeft=Math.round((then-Date.now())/1000);setPlayers(function(previousPlayers){return previousPlayers.map(function(player){return player.Id===myCounter?_objectSpread(_objectSpread({},player),{},{TimeAllowed:secondsLeft}):_objectSpread({},player);});});;if(secondsLeft<=0){alert(\"\".concat(players[myCounter].Name,\" ran out of time\"));clearTimeout(timer);return;}},1000);return function(){return clearTimeout(timer);};},[players,counter]);var numPlayers=0;var timeAllowed=0;// Ref to save and use the input for amount of time\nvar noPlayersRef=useRef();//Set number of players based on Input\nfunction handlePlayers(e){e.preventDefault();numPlayers=noPlayersRef.current.value;if(!(numPlayers>1&&numPlayers<=6)){alert('Invalid amount of Players, must be between 2 and 6');return;};var myArray=[];for(var i=0;i<numPlayers;i++){myArray.push({Id:i,Name:\"Player \".concat(i+1),Position:i,TimeAllowed:timeAllowed,Active:false,AlreadyCounting:false,Color:colors[i]});}setPlayers(myArray);document.querySelector('#StartForm').style.display='none';document.querySelector('#TimeForm').style.display='block';}// Ref to save and use the input for amount of time\nvar timeAllowedRef=useRef();//Set amount of time allowed based on input\nfunction handleTime(e){e.preventDefault();timeAllowed=timeAllowedRef.current.value;if(!function(timeAllowed){return 1&&timeAllowed<=300;}){alert('Invalid amount of Time, must be between 1 and 300');return;};setPlayers(function(oldPlayers){return oldPlayers.map(function(player){return _objectSpread(_objectSpread({},player),{},{TimeAllowed:timeAllowed*60});});});document.querySelector('#TimeForm').style.display='none';document.querySelector('#StartGame').style.display='block';var names=document.querySelectorAll('.name');names.forEach(function(name){return name.disabled=false;});}//Function to start the game\nfunction handleStartGame(e){setPlayers(function(oldPlayers){return oldPlayers.map(function(player){return player.Id===0?_objectSpread(_objectSpread({},player),{},{Active:true}):_objectSpread({},player);});});document.querySelector('#StartGame').style.display='none';var names=document.querySelectorAll('.name');names.forEach(function(name){return name.disabled=true;});document.getElementById('0').style.visibility=\"visible\";}//Function to move onto the next player's turn\nfunction handleNextTurn(){document.getElementById(\"\".concat(counter)).style.visibility=\"hidden\";var nextCounter=(counter+1)%players.length;if(nextCounter===0){setPlayers(function(oldPlayers){return oldPlayers.map(function(player){if(player.Id===counter){return _objectSpread(_objectSpread({},player),{},{Active:false,AlreadyCounting:false});}else{return _objectSpread({},player);}});});setCounter(function(counter){return nextCounter;});checkForOrderChange();}else{document.getElementById(\"\".concat(nextCounter)).style.visibility=\"visible\";setPlayers(function(oldPlayers){return oldPlayers.map(function(player){if(player.Id===nextCounter){return _objectSpread(_objectSpread({},player),{},{Active:true});}else if(player.Id===counter){return _objectSpread(_objectSpread({},player),{},{Active:false,AlreadyCounting:false});}else{return _objectSpread({},player);}});});setCounter(function(counter){return nextCounter;});}}//Function to allow players to change their order\nfunction checkForOrderChange(){var positions=document.querySelectorAll('.position');positions.forEach(function(pos){return pos.disabled=false;});document.querySelector('.changeOrder').style.display='block';}//Reordering players based on input\nfunction handleOrderChange(){var myArray=_toConsumableArray(players);myArray.sort(function(a,b){return a.Position>b.Position?1:-1;});myArray[0].Active=true;for(var i=0;i<myArray.length;i++){myArray[i].Id=i;console.log(myArray[i]);}setPlayers(myArray);var positions=document.querySelectorAll('.position');positions.forEach(function(pos){return pos.disabled=true;});document.querySelector('.changeOrder').style.display='none';document.getElementById('0').style.visibility=\"visible\";}//Function to change the individual players 'position' (The position attribute will then be used to order the players)\nfunction handleInternalPosition(oldPos,newPos){setPlayers(function(oldPlayers){return oldPlayers.map(function(player){return player.Id===oldPos?_objectSpread(_objectSpread({},player),{},{Position:newPos}):_objectSpread({},player);});});}//Function to change the individual players' names\nfunction handleNameChange(newName,position){setPlayers(function(oldPlayers){return oldPlayers.map(function(player){return player.Id===position?_objectSpread(_objectSpread({},player),{},{Name:newName}):_objectSpread({},player);});});}function endGame(){document.getElementById(\"\".concat(counter)).style.visibility=\"hidden\";}return/*#__PURE__*/_jsxs(\"div\",{className:\"HoldingDiv\",style:{margin:'10px'},children:[/*#__PURE__*/_jsxs(\"form\",{onSubmit:handlePlayers,id:\"StartForm\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"Number of Players:\",/*#__PURE__*/_jsx(\"input\",{type:\"number\",ref:noPlayersRef})]}),/*#__PURE__*/_jsx(\"input\",{type:\"submit\",value:\"Submit\"})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleTime,style:{display:'none'},id:\"TimeForm\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"Amount of Time (Minutes):\",/*#__PURE__*/_jsx(\"input\",{type:\"number\",ref:timeAllowedRef})]}),/*#__PURE__*/_jsx(\"input\",{type:\"submit\",value:\"Submit\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'none'},id:\"StartGame\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Set Player Names\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleStartGame,children:\"Start Game\"})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(PlayerList,{Players:players,HandleOrderChange:handleOrderChange,HandleNextTurn:handleNextTurn,HandleNameChange:handleNameChange,HandleInternalPosition:handleInternalPosition})})]});}export default PlayerSetup;// document.querySelector('#StartForm').style.display = 'none';\n// document.querySelector('#TimeForm').style.display = 'block';\n// const names = document.querySelectorAll('.nameInput');\n// names.forEach(name => name.disabled = false);","map":{"version":3,"sources":["C:/Users/taylo/OneDrive/Documents/WebDevelopment/Learn_React/boardgame_clock/src/PlayerSetup.js"],"names":["React","useState","useRef","useEffect","PlayerList","PlayerSetup","players","setPlayers","counter","setCounter","colors","firstLoad","current","myCounter","Active","now","Date","then","TimeAllowed","timer","setTimeout","console","log","clearTimeout","secondsLeft","Math","round","previousPlayers","map","player","Id","alert","Name","numPlayers","timeAllowed","noPlayersRef","handlePlayers","e","preventDefault","value","myArray","i","push","Position","AlreadyCounting","Color","document","querySelector","style","display","timeAllowedRef","handleTime","oldPlayers","names","querySelectorAll","forEach","name","disabled","handleStartGame","getElementById","visibility","handleNextTurn","nextCounter","length","checkForOrderChange","positions","pos","handleOrderChange","sort","a","b","handleInternalPosition","oldPos","newPos","handleNameChange","newName","position","endGame","margin"],"mappings":"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","sourcesContent":["import React, {useState, useRef, useEffect} from 'react';\r\nimport './App.css';\r\nimport PlayerList from './PlayerList.js';\r\n\r\nfunction PlayerSetup(){\r\n\r\n    const [players, setPlayers] = useState([]);\r\n    const [counter, setCounter] = useState(0);\r\n\r\n    const colors = ['red', 'green', 'yellow', 'blue', 'white', 'black'];\r\n\r\n    // Ref so that UseEffect is not run when the page is first loaded\r\n    const firstLoad = useRef(true);\r\n\r\n    useEffect(() => {\r\n        if (firstLoad.current){\r\n            firstLoad.current = false;\r\n            return;\r\n        }\r\n        const myCounter = counter;\r\n        if (!players[counter].Active){\r\n            return;\r\n        }\r\n        const now = Date.now();\r\n        const then = now + players[myCounter].TimeAllowed * 1000;\r\n        const timer = setTimeout(() => {\r\n            //check if we should stop the timer\r\n            if(!players[myCounter].Active || myCounter !== counter){\r\n                console.log(\"Out!\");\r\n                clearTimeout(timer);\r\n                return;\r\n            };\r\n            const secondsLeft = Math.round((then - Date.now()) / 1000);\r\n            setPlayers(previousPlayers => previousPlayers.map(player => player.Id === myCounter ? {...player, TimeAllowed: secondsLeft} : {...player}));;\r\n            if (secondsLeft <= 0){\r\n                alert(`${players[myCounter].Name} ran out of time`);\r\n                clearTimeout(timer);\r\n                return;\r\n            }\r\n        }, 1000);\r\n        return () => clearTimeout(timer);\r\n    }, [players, counter]);\r\n\r\n    let numPlayers = 0;\r\n    let timeAllowed = 0;\r\n\r\n    // Ref to save and use the input for amount of time\r\n    const noPlayersRef = useRef();\r\n\r\n    //Set number of players based on Input\r\n    function handlePlayers(e) {\r\n        e.preventDefault();\r\n        numPlayers = noPlayersRef.current.value;\r\n        if (!(numPlayers > 1 && numPlayers <= 6)) {\r\n            alert('Invalid amount of Players, must be between 2 and 6');\r\n            return;\r\n        };\r\n        const myArray = [];\r\n        for (let i=0; i<numPlayers; i++){\r\n            myArray.push({Id: i, Name: `Player ${i+1}`, Position: i, TimeAllowed: timeAllowed, Active: false, AlreadyCounting: false, Color: colors[i]});\r\n        }\r\n        setPlayers(myArray);\r\n        document.querySelector('#StartForm').style.display = 'none';\r\n        document.querySelector('#TimeForm').style.display = 'block';\r\n    }\r\n\r\n    // Ref to save and use the input for amount of time\r\n    const timeAllowedRef = useRef();\r\n\r\n    //Set amount of time allowed based on input\r\n    function handleTime(e) {\r\n        e.preventDefault();\r\n        timeAllowed = timeAllowedRef.current.value;\r\n        if (!(timeAllowed => 1 && timeAllowed <= 300)) {\r\n            alert('Invalid amount of Time, must be between 1 and 300');\r\n            return;\r\n        };\r\n        setPlayers(oldPlayers => oldPlayers.map(player => {\r\n            return {...player, TimeAllowed: timeAllowed*60};\r\n        }))\r\n        document.querySelector('#TimeForm').style.display = 'none';\r\n        document.querySelector('#StartGame').style.display = 'block';\r\n        const names = document.querySelectorAll('.name');\r\n        names.forEach(name => name.disabled = false);\r\n    }\r\n\r\n    //Function to start the game\r\n    function handleStartGame(e){\r\n        setPlayers(oldPlayers => oldPlayers.map(player => player.Id === 0 ? {...player, Active: true} : {...player}));\r\n        document.querySelector('#StartGame').style.display = 'none';\r\n        const names = document.querySelectorAll('.name');\r\n        names.forEach(name => name.disabled = true);\r\n        document.getElementById('0').style.visibility=\"visible\";\r\n    }\r\n\r\n    //Function to move onto the next player's turn\r\n    function handleNextTurn(){\r\n        document.getElementById(`${counter}`).style.visibility=\"hidden\";\r\n        const nextCounter = (counter + 1) % players.length;\r\n        if (nextCounter === 0){\r\n            setPlayers(oldPlayers => oldPlayers.map(player => {\r\n                if (player.Id === counter){\r\n                    return {...player, Active: false, AlreadyCounting: false}\r\n                } else {\r\n                    return {...player};\r\n                }\r\n            }));\r\n            setCounter(counter => nextCounter);\r\n            checkForOrderChange();\r\n        } else {\r\n            document.getElementById(`${nextCounter}`).style.visibility=\"visible\";\r\n            setPlayers(oldPlayers => oldPlayers.map(player => {\r\n                if (player.Id === nextCounter){\r\n                    return {...player, Active: true}\r\n                } else if (player.Id === counter){\r\n                    return {...player, Active: false, AlreadyCounting: false}\r\n                } else {\r\n                    return {...player};\r\n                }\r\n            }));\r\n            setCounter(counter => nextCounter);\r\n        }\r\n    }\r\n\r\n    //Function to allow players to change their order\r\n    function checkForOrderChange(){\r\n        const positions = document.querySelectorAll('.position');\r\n        positions.forEach(pos => pos.disabled = false);\r\n        document.querySelector('.changeOrder').style.display = 'block';\r\n    }\r\n\r\n    //Reordering players based on input\r\n    function handleOrderChange(){\r\n        const myArray = [...players];\r\n        myArray.sort((a,b) => a.Position > b.Position ? 1 : -1);\r\n        myArray[0].Active = true;\r\n        for (let i = 0; i < myArray.length; i++){\r\n            myArray[i].Id = i;\r\n            console.log(myArray[i]);\r\n        }\r\n        setPlayers(myArray);\r\n        const positions = document.querySelectorAll('.position');\r\n        positions.forEach(pos => pos.disabled = true);\r\n        document.querySelector('.changeOrder').style.display = 'none';\r\n        document.getElementById('0').style.visibility=\"visible\";\r\n    }\r\n\r\n    //Function to change the individual players 'position' (The position attribute will then be used to order the players)\r\n    function handleInternalPosition(oldPos, newPos) {\r\n        setPlayers((oldPlayers) => oldPlayers.map(player => player.Id === oldPos ? {...player, Position: newPos} : {...player}));\r\n    }\r\n\r\n    //Function to change the individual players' names\r\n    function handleNameChange(newName, position){\r\n        setPlayers((oldPlayers) => oldPlayers.map(player => player.Id === position ? {...player, Name: newName} : {...player}));\r\n    }\r\n\r\n    function endGame(){\r\n        document.getElementById(`${counter}`).style.visibility=\"hidden\";\r\n    }\r\n\r\n    return(\r\n        <div className=\"HoldingDiv\" style={{margin: '10px'}}>\r\n          <form onSubmit={handlePlayers} id=\"StartForm\">\r\n            <label>\r\n              Number of Players:\r\n              <input type=\"number\" ref={noPlayersRef} />\r\n            </label>\r\n            <input type=\"submit\" value=\"Submit\" />\r\n          </form>\r\n          <form onSubmit={handleTime} style={{display: 'none'}} id=\"TimeForm\">\r\n            <label>\r\n              Amount of Time (Minutes):\r\n              <input type=\"number\" ref={timeAllowedRef} />\r\n            </label>\r\n            <input type=\"submit\" value=\"Submit\" />\r\n          </form>\r\n          <div style={{display: 'none'}} id=\"StartGame\">\r\n              <p>Set Player Names</p>\r\n              <button onClick={handleStartGame}>Start Game</button>\r\n          </div>\r\n          <div>\r\n            <PlayerList\r\n                Players = {players}\r\n                HandleOrderChange = {handleOrderChange}\r\n                HandleNextTurn = {handleNextTurn}\r\n                HandleNameChange = {handleNameChange}\r\n                HandleInternalPosition = {handleInternalPosition}\r\n            />\r\n          </div>\r\n        </div>\r\n    );\r\n\r\n\r\n}\r\n\r\nexport default PlayerSetup;\r\n\r\n\r\n\r\n        // document.querySelector('#StartForm').style.display = 'none';\r\n        // document.querySelector('#TimeForm').style.display = 'block';\r\n        // const names = document.querySelectorAll('.nameInput');\r\n        // names.forEach(name => name.disabled = false);\r\n"]},"metadata":{},"sourceType":"module"}